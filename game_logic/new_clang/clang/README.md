Новый план:
Инкрементная оценка.
Фигуры содержат
1) Д - поле, на котором находится
2) Поля, которые атакует, разделенные по направлениям.

Почему хорошо:
У фигур заранее есть их легальные ходы, их не нужно вычислять
Замечание. Легальными ходами считаются ходы, основанные на правилах движения фигуры и наличии препятствий. То есть нет понятия связанной фигуры.

**Действия при ходе**:
При ходе А->Б, есть 2 поля и 1 флаг:
А - Поле, которое фигура покидает
Б - Поле, которое фигура занимает
Ц - цвет фигуры (к или ч)

Проходимся по всем фигурам на доске (их не более 32)
Для каждой фигуры:
    Если Д = Б, то
        фигура снимается с доски (и делает ход А->none)
        (подумать) вместо всего следующего, смотрим концы направлений у фигур,
        если фигура своя - это поле доступно, иначе - занято
        UPDATE: на Б не может быть своей фигуры, т.к. тогда мы не можем сделать ход на Б.
Для каждой фигуры идем по направлениям (их не более 4)
    По направлению:
        Каждое поле сверяется с А и Б:
            1. Если Б, то если Ц союзный, то обрубаем направление, иначе добавляем это поле и обрубаем остальное. Стоп.
            2. Если А, то добавляем это поле и по направлению

*Замечание*
1. метод с направлениями может быть не оптимален для "коротких" фигур
2. Может помочь непрерывность линии атаки (можно проверять только конец)

**ВАЖНО**
Можно хранить НЕ ВСЕ поля, а только начальное и конечное.
Потому что почти для всех фигур конечная точка - единственная
    Тогда, если a=(ax,ay) - new one, p=(px,py) - position, f=(fx,fy) - frontline, то


**DONE**
Ситуация:
Пешка заблокирована союзной фигурой (frontline = null), эту фигуру бьет противник.
Пешка должна получить frontline на поле перед собой.
Решение:
Отдельно посмотреть frontline + move == Б
            


Использовать hashmap для хранения позиции


вся идея использования препятствий придумана, чтобы не пересчитывать возможные ходы для фигур (т.е. не прибавлять им их move и проверять, упирается ли в фигуру)
Почему тогда просто не хранить список ходов?
На самом деле, препятствия - это и есть список ходов, потому что большинство фигур ходят только на одну клетку. 